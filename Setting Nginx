C·∫§U H√åNH NGINX + HTTPS CHO ·ª®NG D·ª§NG FRONTEND REACT (PORT 3000)
üéØ M·ª•c ti√™u:
Truy c·∫≠p http://www.datdev.com s·∫Ω t·ª± chuy·ªÉn th√†nh https://www.datdev.com

·∫®n port 3000, ng∆∞·ªùi d√πng kh√¥ng c·∫ßn g√µ :3000

S·ª≠ d·ª•ng Nginx l√†m reverse proxy v√† Certbot ƒë·ªÉ c·∫•p ch·ª©ng ch·ªâ HTTPS

-----------------------------------
C√†i ƒë·∫∑t Nginx
sudo apt update
sudo apt install nginx -y

Ki·ªÉm tra tr·∫°ng th√°i Nginx:
sudo systemctl status nginx
N·∫øu ch∆∞a ch·∫°y:
sudo systemctl start nginx
sudo systemctl enable nginx
C·∫•u h√¨nh Nginx l√†m reverse proxy
sudo nano /etc/nginx/sites-available/datdev.com
c·∫•u h√¨nh 
server {
    listen 80;
    server_name datdev.com www.datdev.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

K√≠ch ho·∫°t site:
sudo ln -s /etc/nginx/sites-available/datdev.com /etc/nginx/sites-enabled/
sudo rm /etc/nginx/sites-enabled/default   # X√≥a default ƒë·ªÉ tr√°nh xung ƒë·ªôt

Ki·ªÉm tra v√† restart Nginx:
sudo nginx -t
sudo systemctl restart nginx

ƒê·∫£m b·∫£o port 80 kh√¥ng b·ªã chi·∫øm

sudo lsof -i :80
sudo kill -9 <PID>

Ki·ªÉm tra HTTP
C√†i Certbot & b·∫≠t HTTPS
sudo apt install certbot python3-certbot-nginx -y


sudo certbot --nginx -d datdev.com -d www.datdev.com
Nh·∫≠p email

ƒê·ªìng √Ω ƒëi·ªÅu kho·∫£n (·∫•n A)

Ch·ªçn 2 ƒë·ªÉ t·ª± ƒë·ªông redirect HTTP ‚Üí HTTPS

Ki·ªÉm tra HTTPS
Truy c·∫≠p:

https://datdev.com

https://www.datdev.com

Ki·ªÉm tra:

C√≥ bi·ªÉu t∆∞·ª£ng ·ªï kh√≥a üîí

Ki·ªÉm tra SSL t·∫°i: https://www.ssllabs.com/ssltest/


------------
ph√≠a BE 

sudo nano /etc/nginx/sites-available/api.datdev.com

server {
    listen 80;
    server_name api.datdev.com;
    
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

sudo nginx -t
sudo systemctl reload nginx

docker restart <container_id_of_backend>

sudo ln -s /etc/nginx/sites-available/api.taycodejava.id.vn /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
sudo certbot --nginx -d api.taycodejava.id.vn





